{"version":3,"file":"urql-core-chunk.js","sources":["../src/utils/error.ts","../src/utils/hash.ts","../src/utils/variables.ts","../src/utils/request.ts","../src/utils/result.ts","../src/internal/fetchOptions.ts","../src/internal/fetchSource.ts"],"sourcesContent":["import { GraphQLError } from '@0no-co/graphql.web';\nimport type { ErrorLike } from '../types';\n\nconst generateErrorMessage = (\n  networkErr?: Error,\n  graphQlErrs?: GraphQLError[]\n) => {\n  let error = '';\n  if (networkErr) return `[Network] ${networkErr.message}`;\n  if (graphQlErrs) {\n    for (let i = 0, l = graphQlErrs.length; i < l; i++) {\n      if (error) error += '\\n';\n      error += `[GraphQL] ${graphQlErrs[i].message}`;\n    }\n  }\n  return error;\n};\n\nconst rehydrateGraphQlError = (error: any): GraphQLError => {\n  if (\n    error &&\n    typeof error.message === 'string' &&\n    (error.extensions || error.name === 'GraphQLError')\n  ) {\n    return error;\n  } else if (typeof error === 'object' && typeof error.message === 'string') {\n    return new GraphQLError(\n      error.message,\n      error.nodes,\n      error.source,\n      error.positions,\n      error.path,\n      error,\n      error.extensions || {}\n    );\n  } else {\n    return new GraphQLError(error as any);\n  }\n};\n\n/** An abstracted `Error` that provides either a `networkError` or `graphQLErrors`.\n *\n * @remarks\n * During a GraphQL request, either the request can fail entirely, causing a network error,\n * or the GraphQL execution or fields can fail, which will cause an {@link ExecutionResult}\n * to contain an array of GraphQL errors.\n *\n * The `CombinedError` abstracts and normalizes both failure cases. When {@link OperationResult.error}\n * is set to this error, the `CombinedError` abstracts all errors, making it easier to handle only\n * a subset of error cases.\n *\n * @see {@link https://urql.dev/goto/docs/basics/errors} for more information on handling\n * GraphQL errors and the `CombinedError`.\n */\nexport class CombinedError extends Error {\n  public name: string;\n  public message: string;\n\n  /** A list of GraphQL errors rehydrated from a {@link ExecutionResult}.\n   *\n   * @remarks\n   * If an {@link ExecutionResult} received from the API contains a list of errors,\n   * the `CombinedError` will rehydrate them, normalize them to\n   * {@link GraphQLError | GraphQLErrors} and list them here.\n   * An empty list indicates that no GraphQL error has been sent by the API.\n   */\n  public graphQLErrors: GraphQLError[];\n\n  /** Set to an error, if a GraphQL request has failed outright.\n   *\n   * @remarks\n   * A GraphQL over HTTP request may fail and not reach the API. Any error that\n   * prevents a GraphQl request outright, will be considered a “network error” and\n   * set here.\n   */\n  public networkError?: Error;\n\n  /** Set to the {@link Response} object a fetch exchange received.\n   *\n   * @remarks\n   * If a built-in fetch {@link Exchange} is used in `urql`, this may\n   * be set to the {@link Response} object of the Fetch API response.\n   * However, since `urql` doesn’t assume that all users will use HTTP\n   * as the only or exclusive transport for GraphQL this property is\n   * neither typed nor guaranteed and may be re-used for other purposes\n   * by non-fetch exchanges.\n   *\n   * Hint: It can be useful to use `response.status` here, however, if\n   * you plan on relying on this being a {@link Response} in your app,\n   * which it is by default, then make sure you add some extra checks\n   * before blindly assuming so!\n   */\n  public response?: any;\n\n  constructor(input: {\n    networkError?: Error;\n    graphQLErrors?: Array<string | ErrorLike>;\n    response?: any;\n  }) {\n    const normalizedGraphQLErrors = (input.graphQLErrors || []).map(\n      rehydrateGraphQlError\n    );\n    const message = generateErrorMessage(\n      input.networkError,\n      normalizedGraphQLErrors\n    );\n\n    super(message);\n\n    this.name = 'CombinedError';\n    this.message = message;\n    this.graphQLErrors = normalizedGraphQLErrors;\n    this.networkError = input.networkError;\n    this.response = input.response;\n  }\n\n  toString(): string {\n    return this.message;\n  }\n}\n","/** A hash value as computed by {@link phash}.\n *\n * @remarks\n * Typically `HashValue`s are used as hashes and keys of GraphQL documents,\n * variables, and combined, for GraphQL requests.\n */\nexport type HashValue = number & {\n  /** Marker to indicate that a `HashValue` may not be created by a user.\n   *\n   * @remarks\n   * `HashValue`s are created by {@link phash} and are marked as such to not mix them\n   * up with other numbers and prevent them from being created or used outside of this\n   * hashing function.\n   *\n   * @internal\n   */\n  readonly _opaque: unique symbol;\n};\n\n/** Computes a djb2 hash of the given string.\n *\n * @param x - the string to be hashed\n * @param seed - optionally a prior hash for progressive hashing\n * @returns a hash value, i.e. a number\n *\n * @remark\n * This is the hashing function used throughout `urql`, primarily to compute\n * {@link Operation.key}.\n *\n * @see {@link http://www.cse.yorku.ca/~oz/hash.html#djb2} for a further description of djb2.\n */\nexport const phash = (x: string, seed?: HashValue): HashValue => {\n  let h = (seed || 5381) | 0;\n  for (let i = 0, l = x.length | 0; i < l; i++)\n    h = (h << 5) + h + x.charCodeAt(i);\n  return h as HashValue;\n};\n","export type FileMap = Map<string, File | Blob>;\n\nconst seen: Set<any> = new Set();\nconst cache: WeakMap<any, any> = new WeakMap();\n\nconst stringify = (x: any, includeFiles: boolean): string => {\n  if (x === null || seen.has(x)) {\n    return 'null';\n  } else if (typeof x !== 'object') {\n    return JSON.stringify(x) || '';\n  } else if (x.toJSON) {\n    return stringify(x.toJSON(), includeFiles);\n  } else if (Array.isArray(x)) {\n    let out = '[';\n    for (let i = 0, l = x.length; i < l; i++) {\n      if (out.length > 1) out += ',';\n      out += stringify(x[i], includeFiles) || 'null';\n    }\n    out += ']';\n    return out;\n  } else if (\n    !includeFiles &&\n    ((FileConstructor !== NoopConstructor && x instanceof FileConstructor) ||\n      (BlobConstructor !== NoopConstructor && x instanceof BlobConstructor))\n  ) {\n    return 'null';\n  }\n\n  const keys = Object.keys(x).sort();\n  if (\n    !keys.length &&\n    x.constructor &&\n    Object.getPrototypeOf(x).constructor !== Object.prototype.constructor\n  ) {\n    const key = cache.get(x) || Math.random().toString(36).slice(2);\n    cache.set(x, key);\n    return stringify({ __key: key }, includeFiles);\n  }\n\n  seen.add(x);\n  let out = '{';\n  for (let i = 0, l = keys.length; i < l; i++) {\n    const value = stringify(x[keys[i]], includeFiles);\n    if (value) {\n      if (out.length > 1) out += ',';\n      out += stringify(keys[i], includeFiles) + ':' + value;\n    }\n  }\n\n  seen.delete(x);\n  out += '}';\n  return out;\n};\n\nconst extract = (map: FileMap, path: string, x: any): void => {\n  if (x == null || typeof x !== 'object' || x.toJSON || seen.has(x)) {\n    /*noop*/\n  } else if (Array.isArray(x)) {\n    for (let i = 0, l = x.length; i < l; i++)\n      extract(map, `${path}.${i}`, x[i]);\n  } else if (x instanceof FileConstructor || x instanceof BlobConstructor) {\n    map.set(path, x as File | Blob);\n  } else {\n    seen.add(x);\n    for (const key in x) extract(map, `${path}.${key}`, x[key]);\n  }\n};\n\n/** A stable stringifier for GraphQL variables objects.\n *\n * @param x - any JSON-like data.\n * @return A JSON string.\n *\n * @remarks\n * This utility creates a stable JSON string from any passed data,\n * and protects itself from throwing.\n *\n * The JSON string is stable insofar as objects’ keys are sorted,\n * and instances of non-plain objects are replaced with random keys\n * replacing their values, which remain stable for the objects’\n * instance.\n */\nexport const stringifyVariables = (x: any, includeFiles?: boolean): string => {\n  seen.clear();\n  return stringify(x, includeFiles || false);\n};\n\nclass NoopConstructor {}\nconst FileConstructor = typeof File !== 'undefined' ? File : NoopConstructor;\nconst BlobConstructor = typeof Blob !== 'undefined' ? Blob : NoopConstructor;\n\nexport const extractFiles = (x: any): FileMap => {\n  const map: FileMap = new Map();\n  if (\n    FileConstructor !== NoopConstructor ||\n    BlobConstructor !== NoopConstructor\n  ) {\n    seen.clear();\n    extract(map, 'variables', x);\n  }\n  return map;\n};\n","import { Kind, parse, print } from '@0no-co/graphql.web';\nimport type { DocumentNode, DefinitionNode } from './graphql';\nimport type { HashValue } from './hash';\nimport { phash } from './hash';\nimport { stringifyVariables } from './variables';\n\nimport type {\n  DocumentInput,\n  TypedDocumentNode,\n  AnyVariables,\n  GraphQLRequest,\n  RequestExtensions,\n} from '../types';\n\ntype PersistedDocumentNode = TypedDocumentNode & {\n  documentId?: string;\n};\n\n/** A `DocumentNode` annotated with its hashed key.\n * @internal\n */\nexport type KeyedDocumentNode = TypedDocumentNode & {\n  __key: HashValue;\n};\n\nconst SOURCE_NAME = 'gql';\nconst GRAPHQL_STRING_RE = /(\"{3}[\\s\\S]*\"{3}|\"(?:\\\\.|[^\"])*\")/g;\nconst REPLACE_CHAR_RE = /(?:#[^\\n\\r]+)?(?:[\\r\\n]+|$)/g;\n\nconst replaceOutsideStrings = (str: string, idx: number): string =>\n  idx % 2 === 0 ? str.replace(REPLACE_CHAR_RE, '\\n') : str;\n\n/** Sanitizes a GraphQL document string by replacing comments and redundant newlines in it. */\nconst sanitizeDocument = (node: string): string =>\n  node.split(GRAPHQL_STRING_RE).map(replaceOutsideStrings).join('').trim();\n\nconst prints: Map<DocumentNode | DefinitionNode, string> = new Map<\n  DocumentNode | DefinitionNode,\n  string\n>();\nconst docs: Map<HashValue, KeyedDocumentNode> = new Map<\n  HashValue,\n  KeyedDocumentNode\n>();\n\n/** A cached printing function for GraphQL documents.\n *\n * @param node - A string of a document or a {@link DocumentNode}\n * @returns A normalized printed string of the passed GraphQL document.\n *\n * @remarks\n * This function accepts a GraphQL query string or {@link DocumentNode},\n * then prints and sanitizes it. The sanitizer takes care of removing\n * comments, which otherwise alter the key of the document although the\n * document is otherwise equivalent to another.\n *\n * When a {@link DocumentNode} is passed to this function, it caches its\n * output by modifying the `loc.source.body` property on the GraphQL node.\n */\nexport const stringifyDocument = (\n  node: string | DefinitionNode | DocumentNode\n): string => {\n  let printed: string;\n  if (typeof node === 'string') {\n    printed = sanitizeDocument(node);\n  } else if (node.loc && docs.get((node as KeyedDocumentNode).__key) === node) {\n    printed = node.loc.source.body;\n  } else {\n    printed = prints.get(node) || sanitizeDocument(print(node));\n    prints.set(node, printed);\n  }\n\n  if (typeof node !== 'string' && !node.loc) {\n    (node as any).loc = {\n      start: 0,\n      end: printed.length,\n      source: {\n        body: printed,\n        name: SOURCE_NAME,\n        locationOffset: { line: 1, column: 1 },\n      },\n    };\n  }\n\n  return printed;\n};\n\n/** Computes the hash for a document's string using {@link stringifyDocument}'s output.\n *\n * @param node - A string of a document or a {@link DocumentNode}\n * @returns A {@link HashValue}\n *\n * @privateRemarks\n * This function adds the operation name of the document to the hash, since sometimes\n * a merged document with multiple operations may be used. Although `urql` requires a\n * `DocumentNode` to only contain a single operation, when the cached `loc.source.body`\n * of a `DocumentNode` is used, this string may still contain multiple operations and\n * the resulting hash should account for only one at a time.\n */\nconst hashDocument = (\n  node: string | DefinitionNode | DocumentNode\n): HashValue => {\n  let key: HashValue;\n  if ((node as PersistedDocumentNode).documentId) {\n    key = phash((node as PersistedDocumentNode).documentId!);\n  } else {\n    key = phash(stringifyDocument(node));\n    // Add the operation name to the produced hash\n    if ((node as DocumentNode).definitions) {\n      const operationName = getOperationName(node as DocumentNode);\n      if (operationName) key = phash(`\\n# ${operationName}`, key);\n    }\n  }\n  return key;\n};\n\n/** Returns a canonical version of the passed `DocumentNode` with an added hash key.\n *\n * @param node - A string of a document or a {@link DocumentNode}\n * @returns A {@link KeyedDocumentNode}\n *\n * @remarks\n * `urql` will always avoid unnecessary work, no matter whether a user passes `DocumentNode`s\n * or strings of GraphQL documents to its APIs.\n *\n * This function will return a canonical version of a {@link KeyedDocumentNode} no matter\n * which kind of input is passed, avoiding parsing or hashing of passed data as needed.\n */\nexport const keyDocument = (node: string | DocumentNode): KeyedDocumentNode => {\n  let key: HashValue;\n  let query: DocumentNode;\n  if (typeof node === 'string') {\n    key = hashDocument(node);\n    query = docs.get(key) || parse(node, { noLocation: true });\n  } else {\n    key = (node as KeyedDocumentNode).__key || hashDocument(node);\n    query = docs.get(key) || node;\n  }\n\n  // Add location information if it's missing\n  if (!query.loc) stringifyDocument(query);\n\n  (query as KeyedDocumentNode).__key = key;\n  docs.set(key, query as KeyedDocumentNode);\n  return query as KeyedDocumentNode;\n};\n\n/** Creates a `GraphQLRequest` from the passed parameters.\n *\n * @param q - A string of a document or a {@link DocumentNode}\n * @param variables - A variables object for the defined GraphQL operation.\n * @returns A {@link GraphQLRequest}\n *\n * @remarks\n * `createRequest` creates a {@link GraphQLRequest} from the passed parameters,\n * while replacing the document as needed with a canonical version of itself,\n * to avoid parsing, printing, or hashing the same input multiple times.\n *\n * If no variables are passed, canonically it'll default to an empty object,\n * which is removed from the resulting hash key.\n */\nexport const createRequest = <\n  Data = any,\n  Variables extends AnyVariables = AnyVariables,\n>(\n  _query: DocumentInput<Data, Variables>,\n  _variables: Variables,\n  extensions?: RequestExtensions | undefined\n): GraphQLRequest<Data, Variables> => {\n  const variables = _variables || ({} as Variables);\n  const query = keyDocument(_query);\n  const printedVars = stringifyVariables(variables, true);\n  let key = query.__key;\n  if (printedVars !== '{}') key = phash(printedVars, key);\n  return { key, query, variables, extensions };\n};\n\n/** Returns the name of the `DocumentNode`'s operation, if any.\n * @param query - A {@link DocumentNode}\n * @returns the operation's name contained within the document, or `undefined`\n */\nexport const getOperationName = (query: DocumentNode): string | undefined => {\n  for (let i = 0, l = query.definitions.length; i < l; i++) {\n    const node = query.definitions[i];\n    if (node.kind === Kind.OPERATION_DEFINITION) {\n      return node.name ? node.name.value : undefined;\n    }\n  }\n};\n\n/** Returns the type of the `DocumentNode`'s operation, if any.\n * @param query - A {@link DocumentNode}\n * @returns the operation's type contained within the document, or `undefined`\n */\nexport const getOperationType = (query: DocumentNode): string | undefined => {\n  for (let i = 0, l = query.definitions.length; i < l; i++) {\n    const node = query.definitions[i];\n    if (node.kind === Kind.OPERATION_DEFINITION) {\n      return node.operation;\n    }\n  }\n};\n","import type {\n  ExecutionResult,\n  Operation,\n  OperationResult,\n  IncrementalPayload,\n} from '../types';\nimport { CombinedError } from './error';\n\n/** Converts the `ExecutionResult` received for a given `Operation` to an `OperationResult`.\n *\n * @param operation - The {@link Operation} for which the API’s result is for.\n * @param result - The GraphQL API’s {@link ExecutionResult}.\n * @param response - Optionally, a raw object representing the API’s result (Typically a {@link Response}).\n * @returns An {@link OperationResult}.\n *\n * @remarks\n * This utility can be used to create {@link OperationResult | OperationResults} in the shape\n * that `urql` expects and defines, and should be used rather than creating the results manually.\n *\n * @throws\n * If no data, or errors are contained within the result, or the result is instead an incremental\n * response containing a `path` property, a “No Content” error is thrown.\n *\n * @see {@link ExecutionResult} for the type definition of GraphQL API results.\n */\nexport const makeResult = (\n  operation: Operation,\n  result: ExecutionResult,\n  response?: any\n): OperationResult => {\n  if (\n    !('data' in result) &&\n    (!('errors' in result) || !Array.isArray(result.errors))\n  ) {\n    throw new Error('No Content');\n  }\n\n  const defaultHasNext = operation.kind === 'subscription';\n  return {\n    operation,\n    data: result.data,\n    error: Array.isArray(result.errors)\n      ? new CombinedError({\n          graphQLErrors: result.errors,\n          response,\n        })\n      : undefined,\n    extensions: result.extensions ? { ...result.extensions } : undefined,\n    hasNext: result.hasNext == null ? defaultHasNext : result.hasNext,\n    stale: false,\n  };\n};\n\nconst deepMerge = (target: any, source: any): any => {\n  if (typeof target === 'object' && target != null) {\n    if (Array.isArray(target)) {\n      target = [...target];\n      for (let i = 0, l = source.length; i < l; i++)\n        target[i] = deepMerge(target[i], source[i]);\n\n      return target;\n    }\n    if (!target.constructor || target.constructor === Object) {\n      target = { ...target };\n      for (const key in source)\n        target[key] = deepMerge(target[key], source[key]);\n      return target;\n    }\n  }\n  return source;\n};\n\n/** Merges an incrementally delivered `ExecutionResult` into a previous `OperationResult`.\n *\n * @param prevResult - The {@link OperationResult} that preceded this result.\n * @param path - The GraphQL API’s {@link ExecutionResult} that should be patching the `prevResult`.\n * @param response - Optionally, a raw object representing the API’s result (Typically a {@link Response}).\n * @returns A new {@link OperationResult} patched with the incremental result.\n *\n * @remarks\n * This utility should be used to merge subsequent {@link ExecutionResult | ExecutionResults} of\n * incremental responses into a prior {@link OperationResult}.\n *\n * When directives like `@defer`, `@stream`, and `@live` are used, GraphQL may deliver new\n * results that modify previous results. In these cases, it'll set a `path` property to modify\n * the result it sent last. This utility is built to handle these cases and merge these payloads\n * into existing {@link OperationResult | OperationResults}.\n *\n * @see {@link ExecutionResult} for the type definition of GraphQL API results.\n */\nexport const mergeResultPatch = (\n  prevResult: OperationResult,\n  nextResult: ExecutionResult,\n  response?: any,\n  pending?: ExecutionResult['pending']\n): OperationResult => {\n  let errors = prevResult.error ? prevResult.error.graphQLErrors : [];\n  let hasExtensions =\n    !!prevResult.extensions || !!(nextResult.payload || nextResult).extensions;\n  const extensions = {\n    ...prevResult.extensions,\n    ...(nextResult.payload || nextResult).extensions,\n  };\n\n  let incremental = nextResult.incremental;\n\n  // NOTE: We handle the old version of the incremental delivery payloads as well\n  if ('path' in nextResult) {\n    incremental = [nextResult as IncrementalPayload];\n  }\n\n  const withData = { data: prevResult.data };\n  if (incremental) {\n    for (let i = 0, l = incremental.length; i < l; i++) {\n      const patch = incremental[i];\n      if (Array.isArray(patch.errors)) {\n        errors.push(...(patch.errors as any));\n      }\n\n      if (patch.extensions) {\n        Object.assign(extensions, patch.extensions);\n        hasExtensions = true;\n      }\n\n      let prop: string | number = 'data';\n      let part: Record<string, any> | Array<any> = withData;\n      let path: readonly (string | number)[] = [];\n      if (patch.path) {\n        path = patch.path;\n      } else if (pending) {\n        const res = pending.find(pendingRes => pendingRes.id === patch.id);\n        if (patch.subPath) {\n          path = [...res!.path, ...patch.subPath];\n        } else {\n          path = res!.path;\n        }\n      }\n\n      for (let i = 0, l = path.length; i < l; prop = path[i++]) {\n        part = part[prop] = Array.isArray(part[prop])\n          ? [...part[prop]]\n          : { ...part[prop] };\n      }\n\n      if (patch.items) {\n        const startIndex = +prop >= 0 ? (prop as number) : 0;\n        for (let i = 0, l = patch.items.length; i < l; i++)\n          part[startIndex + i] = deepMerge(\n            part[startIndex + i],\n            patch.items[i]\n          );\n      } else if (patch.data !== undefined) {\n        part[prop] = deepMerge(part[prop], patch.data);\n      }\n    }\n  } else {\n    withData.data = (nextResult.payload || nextResult).data || prevResult.data;\n    errors =\n      (nextResult.errors as any[]) ||\n      (nextResult.payload && nextResult.payload.errors) ||\n      errors;\n  }\n\n  return {\n    operation: prevResult.operation,\n    data: withData.data,\n    error: errors.length\n      ? new CombinedError({ graphQLErrors: errors, response })\n      : undefined,\n    extensions: hasExtensions ? extensions : undefined,\n    hasNext:\n      nextResult.hasNext != null ? nextResult.hasNext : prevResult.hasNext,\n    stale: false,\n  };\n};\n\n/** Creates an `OperationResult` containing a network error for requests that encountered unexpected errors.\n *\n * @param operation - The {@link Operation} for which the API’s result is for.\n * @param error - The network-like error that prevented an API result from being delivered.\n * @param response - Optionally, a raw object representing the API’s result (Typically a {@link Response}).\n * @returns An {@link OperationResult} containing only a {@link CombinedError}.\n *\n * @remarks\n * This utility can be used to create {@link OperationResult | OperationResults} in the shape\n * that `urql` expects and defines, and should be used rather than creating the results manually.\n * This function should be used for when the {@link CombinedError.networkError} property is\n * populated and no GraphQL execution actually occurred.\n */\nexport const makeErrorResult = (\n  operation: Operation,\n  error: Error,\n  response?: any\n): OperationResult => ({\n  operation,\n  data: undefined,\n  error: new CombinedError({\n    networkError: error,\n    response,\n  }),\n  extensions: undefined,\n  hasNext: false,\n  stale: false,\n});\n","import {\n  stringifyDocument,\n  getOperationName,\n  stringifyVariables,\n  extractFiles,\n} from '../utils';\n\nimport type { AnyVariables, GraphQLRequest, Operation } from '../types';\n\n/** Abstract definition of the JSON data sent during GraphQL HTTP POST requests. */\nexport interface FetchBody {\n  query?: string;\n  documentId?: string;\n  operationName: string | undefined;\n  variables: undefined | Record<string, any>;\n  extensions: undefined | Record<string, any>;\n}\n\n/** Creates a GraphQL over HTTP compliant JSON request body.\n * @param request - An object containing a `query` document and `variables`.\n * @returns A {@link FetchBody}\n * @see {@link https://github.com/graphql/graphql-over-http} for the GraphQL over HTTP spec.\n */\nexport function makeFetchBody<\n  Data = any,\n  Variables extends AnyVariables = AnyVariables,\n>(request: Omit<GraphQLRequest<Data, Variables>, 'key'>): FetchBody {\n  const body: FetchBody = {\n    query: undefined,\n    documentId: undefined,\n    operationName: getOperationName(request.query),\n    variables: request.variables || undefined,\n    extensions: request.extensions,\n  };\n\n  if (\n    'documentId' in request.query &&\n    request.query.documentId &&\n    // NOTE: We have to check that the document will definitely be sent\n    // as a persisted document to avoid breaking changes\n    (!request.query.definitions || !request.query.definitions.length)\n  ) {\n    body.documentId = request.query.documentId;\n  } else if (\n    !request.extensions ||\n    !request.extensions.persistedQuery ||\n    !!request.extensions.persistedQuery.miss\n  ) {\n    body.query = stringifyDocument(request.query);\n  }\n\n  return body;\n}\n\n/** Creates a URL that will be called for a GraphQL HTTP request.\n *\n * @param operation - An {@link Operation} for which to make the request.\n * @param body - A {@link FetchBody} which may be replaced with a URL.\n *\n * @remarks\n * Creates the URL that’ll be called as part of a GraphQL HTTP request.\n * Built-in fetch exchanges support sending GET requests, even for\n * non-persisted full requests, which this function supports by being\n * able to serialize GraphQL requests into the URL.\n */\nexport const makeFetchURL = (\n  operation: Operation,\n  body?: FetchBody\n): string => {\n  const useGETMethod =\n    operation.kind === 'query' && operation.context.preferGetMethod;\n  if (!useGETMethod || !body) return operation.context.url;\n\n  const urlParts = splitOutSearchParams(operation.context.url);\n  for (const key in body) {\n    const value = body[key];\n    if (value) {\n      urlParts[1].set(\n        key,\n        typeof value === 'object' ? stringifyVariables(value) : value\n      );\n    }\n  }\n  const finalUrl = urlParts.join('?');\n  if (finalUrl.length > 2047 && useGETMethod !== 'force') {\n    operation.context.preferGetMethod = false;\n    return operation.context.url;\n  }\n\n  return finalUrl;\n};\n\nconst splitOutSearchParams = (\n  url: string\n): readonly [string, URLSearchParams] => {\n  const start = url.indexOf('?');\n  return start > -1\n    ? [url.slice(0, start), new URLSearchParams(url.slice(start + 1))]\n    : [url, new URLSearchParams()];\n};\n\n/** Serializes a {@link FetchBody} into a {@link RequestInit.body} format. */\nconst serializeBody = (\n  operation: Operation,\n  body?: FetchBody\n): FormData | string | undefined => {\n  const omitBody =\n    operation.kind === 'query' && !!operation.context.preferGetMethod;\n  if (body && !omitBody) {\n    const json = stringifyVariables(body);\n    const files = extractFiles(body.variables);\n    if (files.size) {\n      const form = new FormData();\n      form.append('operations', json);\n      form.append(\n        'map',\n        stringifyVariables({\n          ...[...files.keys()].map(value => [value]),\n        })\n      );\n      let index = 0;\n      for (const file of files.values()) form.append(`${index++}`, file);\n      return form;\n    }\n    return json;\n  }\n};\n\nconst isHeaders = (headers: HeadersInit): headers is Headers =>\n  'has' in headers && !Object.keys(headers).length;\n\n/** Creates a `RequestInit` object for a given `Operation`.\n *\n * @param operation - An {@link Operation} for which to make the request.\n * @param body - A {@link FetchBody} which is added to the options, if the request isn’t a GET request.\n *\n * @remarks\n * Creates the fetch options {@link RequestInit} object that’ll be passed to the Fetch API\n * as part of a GraphQL over HTTP request. It automatically sets a default `Content-Type`\n * header.\n *\n * @see {@link https://github.com/graphql/graphql-over-http} for the GraphQL over HTTP spec.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API} for the Fetch API spec.\n */\nexport const makeFetchOptions = (\n  operation: Operation,\n  body?: FetchBody\n): RequestInit => {\n  const headers: HeadersInit = {\n    accept:\n      operation.kind === 'subscription'\n        ? 'text/event-stream, multipart/mixed'\n        : 'application/graphql-response+json, application/graphql+json, application/json, text/event-stream, multipart/mixed',\n  };\n  const extraOptions =\n    (typeof operation.context.fetchOptions === 'function'\n      ? operation.context.fetchOptions()\n      : operation.context.fetchOptions) || {};\n  if (extraOptions.headers) {\n    if (isHeaders(extraOptions.headers)) {\n      extraOptions.headers.forEach((value, key) => {\n        headers[key] = value;\n      });\n    } else if (Array.isArray(extraOptions.headers)) {\n      (extraOptions.headers as Array<[string, string]>).forEach(\n        (value, key) => {\n          if (Array.isArray(value)) {\n            if (headers[value[0]]) {\n              headers[value[0]] = `${headers[value[0]]},${value[1]}`;\n            } else {\n              headers[value[0]] = value[1];\n            }\n          } else {\n            headers[key] = value;\n          }\n        }\n      );\n    } else {\n      for (const key in extraOptions.headers) {\n        headers[key.toLowerCase()] = extraOptions.headers[key];\n      }\n    }\n  }\n\n  const serializedBody = serializeBody(operation, body);\n  if (typeof serializedBody === 'string' && !headers['content-type'])\n    headers['content-type'] = 'application/json';\n  return {\n    ...extraOptions,\n    method: serializedBody ? 'POST' : 'GET',\n    body: serializedBody,\n    headers,\n  };\n};\n","/* Summary: This file handles the HTTP transport via GraphQL over HTTP\n * See: https://graphql.github.io/graphql-over-http/draft/\n *\n * `@urql/core`, by default, implements several RFC'd protocol extensions\n * on top of this. As such, this implementation supports:\n * - [Incremental Delivery](https://github.com/graphql/graphql-over-http/blob/main/rfcs/IncrementalDelivery.md)\n * - [GraphQL over SSE](https://github.com/graphql/graphql-over-http/blob/main/rfcs/GraphQLOverSSE.md)\n *\n * This also supports the \"Defer Stream\" payload format.\n * See: https://github.com/graphql/graphql-wg/blob/main/rfcs/DeferStream.md\n * Implementation for this is located in `../utils/result.ts` in `mergeResultPatch`\n *\n * And; this also supports the GraphQL Multipart spec for file uploads.\n * See: https://github.com/jaydenseric/graphql-multipart-request-spec\n * Implementation for this is located in `../utils/variables.ts` in `extractFiles`,\n * and `./fetchOptions.ts` in `serializeBody`.\n *\n * And; this also supports GET requests (and hence; automatic persisted queries)\n * via the `@urql/exchange-persisted` package.\n *\n * This implementation DOES NOT support Batching.\n * See: https://github.com/graphql/graphql-over-http/blob/main/rfcs/Batching.md\n * Which is deemed out-of-scope, as it's sufficiently unnecessary given\n * modern handling of HTTP requests being in parallel.\n *\n * The implementation in this file needs to make certain accommodations for:\n * - The Web Fetch API\n * - Non-browser or polyfill Fetch APIs\n * - Node.js-like Fetch implementations (see `toString` below)\n *\n * GraphQL over SSE has a reference implementation, which supports non-HTTP/2\n * modes and is a faithful implementation of the spec.\n * See: https://github.com/enisdenjo/graphql-sse\n *\n * GraphQL Inremental Delivery (aka “GraphQL Multipart Responses”) has a\n * reference implementation, which a prior implementation of this file heavily\n * leaned on (See prior attribution comments)\n * See: https://github.com/maraisr/meros\n *\n * This file merges support for all three GraphQL over HTTP response formats\n * via async generators and Wonka’s `fromAsyncIterable`. As part of this, `streamBody`\n * and `split` are the common, cross-compatible base implementations.\n */\n\nimport type { Source } from 'wonka';\nimport { fromAsyncIterable, onEnd, filter, pipe } from 'wonka';\nimport type { Operation, OperationResult, ExecutionResult } from '../types';\nimport { makeResult, makeErrorResult, mergeResultPatch } from '../utils';\n\nconst decoder = typeof TextDecoder !== 'undefined' ? new TextDecoder() : null;\nconst boundaryHeaderRe = /boundary=\"?([^=\";]+)\"?/i;\nconst eventStreamRe = /data: ?([^\\n]+)/;\n\ntype ChunkData = Buffer | Uint8Array;\n\n// NOTE: We're avoiding referencing the `Buffer` global here to prevent\n// auto-polyfilling in Webpack\nconst toString = (input: Buffer | ArrayBuffer): string =>\n  input.constructor.name === 'Buffer'\n    ? (input as Buffer).toString()\n    : decoder!.decode(input as ArrayBuffer);\n\nasync function* streamBody(response: Response): AsyncIterableIterator<string> {\n  if (response.body![Symbol.asyncIterator]) {\n    for await (const chunk of response.body! as any)\n      yield toString(chunk as ChunkData);\n  } else {\n    const reader = response.body!.getReader();\n    let result: ReadableStreamReadResult<ChunkData>;\n    try {\n      while (!(result = await reader.read()).done) yield toString(result.value);\n    } finally {\n      reader.cancel();\n    }\n  }\n}\n\nasync function* split(\n  chunks: AsyncIterableIterator<string>,\n  boundary: string\n): AsyncIterableIterator<string> {\n  let buffer = '';\n  let boundaryIndex: number;\n  for await (const chunk of chunks) {\n    buffer += chunk;\n    while ((boundaryIndex = buffer.indexOf(boundary)) > -1) {\n      yield buffer.slice(0, boundaryIndex);\n      buffer = buffer.slice(boundaryIndex + boundary.length);\n    }\n  }\n}\n\nasync function* parseJSON(\n  response: Response\n): AsyncIterableIterator<ExecutionResult> {\n  yield JSON.parse(await response.text());\n}\n\nasync function* parseEventStream(\n  response: Response\n): AsyncIterableIterator<ExecutionResult> {\n  let payload: any;\n  for await (const chunk of split(streamBody(response), '\\n\\n')) {\n    const match = chunk.match(eventStreamRe);\n    if (match) {\n      const chunk = match[1];\n      try {\n        yield (payload = JSON.parse(chunk));\n      } catch (error) {\n        if (!payload) throw error;\n      }\n      if (payload && payload.hasNext === false) break;\n    }\n  }\n  if (payload && payload.hasNext !== false) {\n    yield { hasNext: false };\n  }\n}\n\nasync function* parseMultipartMixed(\n  contentType: string,\n  response: Response\n): AsyncIterableIterator<ExecutionResult> {\n  const boundaryHeader = contentType.match(boundaryHeaderRe);\n  const boundary = '--' + (boundaryHeader ? boundaryHeader[1] : '-');\n  let isPreamble = true;\n  let payload: any;\n  for await (let chunk of split(streamBody(response), '\\r\\n' + boundary)) {\n    if (isPreamble) {\n      isPreamble = false;\n      const preambleIndex = chunk.indexOf(boundary);\n      if (preambleIndex > -1) {\n        chunk = chunk.slice(preambleIndex + boundary.length);\n      } else {\n        continue;\n      }\n    }\n    try {\n      yield (payload = JSON.parse(chunk.slice(chunk.indexOf('\\r\\n\\r\\n') + 4)));\n    } catch (error) {\n      if (!payload) throw error;\n    }\n    if (payload && payload.hasNext === false) break;\n  }\n  if (payload && payload.hasNext !== false) {\n    yield { hasNext: false };\n  }\n}\n\nasync function* parseMaybeJSON(\n  response: Response\n): AsyncIterableIterator<ExecutionResult> {\n  const text = await response.text();\n  try {\n    const result = JSON.parse(text);\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn(\n        `Found response with content-type \"text/plain\" but it had a valid \"application/json\" response.`\n      );\n    }\n    yield result;\n  } catch (e) {\n    throw new Error(text);\n  }\n}\n\nasync function* fetchOperation(\n  operation: Operation,\n  url: string,\n  fetchOptions: RequestInit\n) {\n  let networkMode = true;\n  let result: OperationResult | null = null;\n  let response: Response | undefined;\n\n  try {\n    // Delay for a tick to give the Client a chance to cancel the request\n    // if a teardown comes in immediately\n    yield await Promise.resolve();\n\n    response = await (operation.context.fetch || fetch)(url, fetchOptions);\n    const contentType = response.headers.get('Content-Type') || '';\n\n    let results: AsyncIterable<ExecutionResult>;\n    if (/multipart\\/mixed/i.test(contentType)) {\n      results = parseMultipartMixed(contentType, response);\n    } else if (/text\\/event-stream/i.test(contentType)) {\n      results = parseEventStream(response);\n    } else if (!/text\\//i.test(contentType)) {\n      results = parseJSON(response);\n    } else {\n      results = parseMaybeJSON(response);\n    }\n\n    let pending: ExecutionResult['pending'];\n    for await (const payload of results) {\n      if (payload.pending && !result) {\n        pending = payload.pending;\n      } else if (payload.pending) {\n        pending = [...pending!, ...payload.pending];\n      }\n      result = result\n        ? mergeResultPatch(result, payload, response, pending)\n        : makeResult(operation, payload, response);\n      networkMode = false;\n      yield result;\n      networkMode = true;\n    }\n\n    if (!result) {\n      yield (result = makeResult(operation, {}, response));\n    }\n  } catch (error: any) {\n    if (!networkMode) {\n      throw error;\n    }\n\n    yield makeErrorResult(\n      operation,\n      response &&\n        (response.status < 200 || response.status >= 300) &&\n        response.statusText\n        ? new Error(response.statusText)\n        : error,\n      response\n    );\n  }\n}\n\n/** Makes a GraphQL HTTP request to a given API by wrapping around the Fetch API.\n *\n * @param operation - The {@link Operation} that should be sent via GraphQL over HTTP.\n * @param url - The endpoint URL for the GraphQL HTTP API.\n * @param fetchOptions - The {@link RequestInit} fetch options for the request.\n * @returns A Wonka {@link Source} of {@link OperationResult | OperationResults}.\n *\n * @remarks\n * This utility defines how all built-in fetch exchanges make GraphQL HTTP requests,\n * supporting multipart incremental responses, cancellation and other smaller\n * implementation details.\n *\n * If you’re implementing a modified fetch exchange for a GraphQL over HTTP API\n * it’s recommended you use this utility.\n *\n * Hint: This function does not use the passed `operation` to create or modify the\n * `fetchOptions` and instead expects that the options have already been created\n * using {@link makeFetchOptions} and modified as needed.\n *\n * @throws\n * If the `fetch` polyfill or globally available `fetch` function doesn’t support\n * streamed multipart responses while trying to handle a `multipart/mixed` GraphQL response,\n * the source will throw “Streaming requests unsupported”.\n * This shouldn’t happen in modern browsers and Node.js.\n *\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API} for the Fetch API spec.\n */\nexport function makeFetchSource(\n  operation: Operation,\n  url: string,\n  fetchOptions: RequestInit\n): Source<OperationResult> {\n  let abortController: AbortController | void;\n  if (typeof AbortController !== 'undefined') {\n    fetchOptions.signal = (abortController = new AbortController()).signal;\n  }\n  return pipe(\n    fromAsyncIterable(fetchOperation(operation, url, fetchOptions)),\n    filter((result): result is OperationResult => !!result),\n    onEnd(() => {\n      if (abortController) abortController.abort();\n    })\n  );\n}\n"],"names":["generateErrorMessage","networkErr","graphQlErrs","error","message","i","l","length","rehydrateGraphQlError","extensions","name","GraphQLError","nodes","source","positions","path","CombinedError","Error","constructor","input","normalizedGraphQLErrors","graphQLErrors","map","networkError","response","toString","phash","x","seed","h","charCodeAt","seen","Set","cache","WeakMap","stringify","includeFiles","has","JSON","toJSON","Array","isArray","out","FileConstructor","NoopConstructor","BlobConstructor","keys","Object","sort","getPrototypeOf","prototype","key","get","Math","random","slice","set","__key","add","value","delete","extract","stringifyVariables","clear","File","Blob","extractFiles","Map","SOURCE_NAME","GRAPHQL_STRING_RE","REPLACE_CHAR_RE","replaceOutsideStrings","str","idx","replace","sanitizeDocument","node","split","join","trim","prints","docs","stringifyDocument","printed","loc","body","print","start","end","locationOffset","line","column","hashDocument","documentId","definitions","operationName","getOperationName","keyDocument","query","parse","noLocation","createRequest","_query","_variables","variables","printedVars","kind","Kind","OPERATION_DEFINITION","undefined","getOperationType","operation","makeResult","result","errors","defaultHasNext","data","hasNext","stale","deepMerge","target","mergeResultPatch","prevResult","nextResult","pending","hasExtensions","payload","incremental","withData","_loop","patch","push","assign","prop","part","res","find","pendingRes","id","subPath","items","startIndex","makeErrorResult","makeFetchBody","request","persistedQuery","miss","makeFetchURL","useGETMethod","context","preferGetMethod","url","urlParts","splitOutSearchParams","finalUrl","indexOf","URLSearchParams","serializeBody","omitBody","json","files","size","form","FormData","append","index","file","values","isHeaders","headers","makeFetchOptions","accept","extraOptions","fetchOptions","forEach","toLowerCase","serializedBody","method","decoder","TextDecoder","boundaryHeaderRe","eventStreamRe","decode","streamBody","Symbol","asyncIterator","chunk","reader","getReader","read","done","cancel","chunks","boundary","buffer","boundaryIndex","parseJSON","text","parseEventStream","match","parseMultipartMixed","contentType","boundaryHeader","isPreamble","preambleIndex","parseMaybeJSON","process","env","NODE_ENV","console","warn","e","fetchOperation","networkMode","Promise","resolve","fetch","results","test","status","statusText","makeFetchSource","abortController","AbortController","signal","onEnd","abort","filter","fromAsyncIterable"],"mappings":"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"}